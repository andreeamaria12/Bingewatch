@{
    ViewData["Title"] = "Bingewatch";
}
@using Personalized_movie_recommendation_system.Infrastructure
@inject IMovieRecommandationService service

@if (User.Identity.IsAuthenticated)
{
    @model IEnumerable<Movie>

   var movies = service.GetRecommendedMovies();
    

    @for (var i = 0; i < movies.Count; i++)
    {
        @if (i % 2 == 0)
        {
             @:<div class="row">
        }

        <div class="col-sm-6 col-md-4">
            <div class="thumbnail">
                <img src="@("api/images?name=" + movies[i].ImageUrl)" alt="..." width="200">
                <div class="caption">
                    <h3>@movies[i].Title</h3>
                    <h5>Rating: @movies[i].Rating</h5>
                    <p>@(movies[i].Description.Substring(0, (movies[i].Description.Length < 200) ? movies[i].Description.Length : 200) + ((movies[i].Description.Length >= 200) ? "..." : string.Empty))</p>
                    <p><a href="/Movie/MoviePage?id=@movies[i].Id" class="btn btn-primary" role="button">Read more</a> <a href="#" class="btn btn-default" role="button">Add to My List</a></p>
                </div>
            </div>
        </div>

        @if (i % 2 == 1 || i == movies.Count - 1)
        {
            @:</div>
                }
           


        }
    }
else
{
<div class="text-center">
<h1>Welcome</h1>
</div>
}


